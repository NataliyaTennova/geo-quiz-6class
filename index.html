<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>–ì–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∞—è –≤–∏–∫—Ç–æ—Ä–∏–Ω–∞ ‚Äî 6 –∫–ª–∞—Å—Å</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="container">
    <h1>üß≠ –ì–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∞—è –≤–∏–∫—Ç–æ—Ä–∏–Ω–∞ ‚Äî 6 –∫–ª–∞—Å—Å</h1>

    <label for="questionCount">–°–∫–æ–ª—å–∫–æ –≤–æ–ø—Ä–æ—Å–æ–≤ –≤—ã —Ö–æ—Ç–∏—Ç–µ?</label>
    <select id="questionCount">
      <option value="5">5</option>
      <option value="10">10</option>
      <option value="15">15</option>
      <option value="20">20</option>
      <option value="25">25</option>
      <option value="30">30</option>
      <option value="35">35</option>
      <option value="40">40</option>
      <option value="45">45</option>
      <option value="50">50</option>
    </select>

    <button id="startQuiz">–ù–∞—á–∞—Ç—å</button>
    <div id="quizContainer"></div>
    <button id="submitQuiz" style="display:none">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
    <div id="results"></div>
  </div>

  <script>
    let questions = [];
    let currentQuiz = [];

    async function loadQuestions() {
      const res = await fetch('questions.json');
      questions = await res.json();
    }

    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    function startQuiz() {
      const count = parseInt(document.getElementById('questionCount').value);
      shuffle(questions);
      currentQuiz = questions.slice(0, count);
      const quizContainer = document.getElementById('quizContainer');
      quizContainer.innerHTML = '';

      currentQuiz.forEach((q, idx) => {
        const div = document.createElement('div');
        div.className = 'question-block';
        div.innerHTML = `<p><strong>${idx + 1}. ${q.question}</strong></p>` +
          q.choices.map((c, i) => `
            <label>
              <input type="radio" name="q${idx}" value="${c}" /> ${c}
            </label><br />
          `).join('');
        quizContainer.appendChild(div);
      });

      document.getElementById('submitQuiz').style.display = 'inline-block';
    }

    function checkQuiz() {
      let score = 0;
      currentQuiz.forEach((q, idx) => {
        const selected = document.querySelector(`input[name="q${idx}"]:checked`);
        if (selected && selected.value === q.answer) {
          score++;
        }
      });
      document.getElementById('results').innerText = `–†–µ–∑—É–ª—å—Ç–∞—Ç: ${score} –∏–∑ ${currentQuiz.length}`;
    }

    document.getElementById('startQuiz').addEventListener('click', startQuiz);
    document.getElementById('submitQuiz').addEventListener('click', checkQuiz);
    loadQuestions();
  </script>
</body>
</html>
